!(function(n, t) {
  "object" == typeof exports && "object" == typeof module
    ? (module.exports = t())
    : "function" == typeof define && define.amd
    ? define([], t)
    : "object" == typeof exports
    ? (exports.sift = t())
    : (n.sift = t());
})(window, function() {
  return (function(n) {
    var t = {};
    function r(e) {
      if (t[e]) return t[e].exports;
      var o = (t[e] = { i: e, l: !1, exports: {} });
      return n[e].call(o.exports, o, o.exports, r), (o.l = !0), o.exports;
    }
    return (
      (r.m = n),
      (r.c = t),
      (r.d = function(n, t, e) {
        r.o(n, t) || Object.defineProperty(n, t, { enumerable: !0, get: e });
      }),
      (r.r = function(n) {
        "undefined" != typeof Symbol &&
          Symbol.toStringTag &&
          Object.defineProperty(n, Symbol.toStringTag, { value: "Module" }),
          Object.defineProperty(n, "__esModule", { value: !0 });
      }),
      (r.t = function(n, t) {
        if ((1 & t && (n = r(n)), 8 & t)) return n;
        if (4 & t && "object" == typeof n && n && n.__esModule) return n;
        var e = Object.create(null);
        if (
          (r.r(e),
          Object.defineProperty(e, "default", { enumerable: !0, value: n }),
          2 & t && "string" != typeof n)
        )
          for (var o in n)
            r.d(
              e,
              o,
              function(t) {
                return n[t];
              }.bind(null, o)
            );
        return e;
      }),
      (r.n = function(n) {
        var t =
          n && n.__esModule
            ? function() {
                return n.default;
              }
            : function() {
                return n;
              };
        return r.d(t, "a", t), t;
      }),
      (r.o = function(n, t) {
        return Object.prototype.hasOwnProperty.call(n, t);
      }),
      (r.p = ""),
      r((r.s = 0))
    );
  })([
    function(n, t, r) {
      n.exports = r(1);
    },
    function(n, t, r) {
      "use strict";
      function e(n) {
        var t = "[object " + n + "]";
        return function(n) {
          return Object.prototype.toString.call(n) === t;
        };
      }
      r.r(t),
        r.d(t, "default", function() {
          return y;
        }),
        r.d(t, "compare", function() {
          return m;
        }),
        r.d(t, "comparable", function() {
          return j;
        });
      var o = e("Array"),
        u = e("Object"),
        i = e("Function");
      function f(n, t) {
        return i(n.get) ? n.get(t) : n[t];
      }
      function c(n) {
        return function(t, r) {
          if (!o(r) || !r.length) return n(t, r);
          for (var e = 0, u = r.length; e < u; e++)
            if (n(t, f(r, e))) return !0;
          return !1;
        };
      }
      function a(n) {
        return function(t, r) {
          if (!o(r) || !r.length) return n(t, r);
          for (var e = 0, u = r.length; e < u; e++)
            if (!n(t, f(r, e))) return !1;
          return !0;
        };
      }
      function l(n, t, r, e) {
        return n.validate(n.options, t, r, e);
      }
      var p = {
          $eq: c(function(n, t) {
            return n(t);
          }),
          $ne: a(function(n, t) {
            return n(t);
          }),
          $gt: c(function(n, t) {
            return n(t);
          }),
          $gte: c(function(n, t) {
            return n(t);
          }),
          $lt: c(function(n, t) {
            return n(t);
          }),
          $lte: c(function(n, t) {
            return n(t);
          }),
          $mod: c(function(n, t) {
            return n(t);
          }),
          $in: (n, t) => n(t),
          $nin: function(n, t) {
            return n(t);
          },
          $not: function(n, t, r, e) {
            return n(t, r, e);
          },
          $type: function(n, t) {
            return n(t);
          },
          $all: function(n, t, r, e) {
            return p.$and(n, t, r, e);
          },
          $size: function(n, t) {
            return !!t && n === t.length;
          },
          $or: function(n, t, r, e) {
            for (var o = 0, u = n.length; o < u; o++)
              if (l(f(n, o), t, r, e)) return !0;
            return !1;
          },
          $nor: function(n, t, r, e) {
            return !p.$or(n, t, r, e);
          },
          $and: function(n, t, r, e) {
            for (var o = 0, u = n.length; o < u; o++)
              if (!l(f(n, o), t, r, e)) return !1;
            return !0;
          },
          $regex: c(function(n, t) {
            return "string" == typeof t && n.test(t);
          }),
          $where: function(n, t, r, e) {
            return n.call(t, t, r, e);
          },
          $elemMatch: function(n, t, r, e) {
            return o(t)
              ? !!~(function(n, t) {
                  for (var r = 0; r < n.length; r++) {
                    f(n, r);
                    if (l(t, f(n, r))) return r;
                  }
                  return -1;
                })(t, n)
              : l(n, t, r, e);
          },
          $exists: function(n, t, r, e) {
            return e.hasOwnProperty(r) === n;
          }
        },
        s = {
          $eq: function(n, t, { comparable: r, compare: e }) {
            return n instanceof RegExp
              ? c(function(t) {
                  return "string" == typeof t && n.test(t);
                })
              : n instanceof Function
              ? c(n)
              : o(n) && !n.length
              ? c(function(n) {
                  return o(n) && !n.length;
                })
              : c(
                  null === n
                    ? function(n) {
                        return null == n;
                      }
                    : function(t) {
                        return 0 === e(r(t), r(n));
                      }
                );
          },
          $gt: function(n, t, { comparable: r, compare: e }) {
            return function(t) {
              return e(r(t), r(n)) > 0;
            };
          },
          $gte: function(n, t, { comparable: r, compare: e }) {
            return function(t) {
              return e(r(t), r(n)) >= 0;
            };
          },
          $lt: function(n, t, { comparable: r, compare: e }) {
            return function(t) {
              return e(r(t), r(n)) < 0;
            };
          },
          $lte: function(n, t, { comparable: r, compare: e }) {
            return function(t) {
              return e(r(t), r(n)) <= 0;
            };
          },
          $in: function(n, t, r) {
            const { comparable: e } = r;
            return function(t) {
              if (!(t instanceof Array)) {
                var o = e(t);
                if (o === t && "object" == typeof t)
                  for (i = n.length; i--; )
                    if (
                      String(n[i]) === String(t) &&
                      "[object Object]" !== String(t)
                    )
                      return !0;
                if (void 0 === o)
                  for (i = n.length; i--; ) if (null == n[i]) return !0;
                for (i = n.length; i--; ) {
                  var u = l(h(f(n, i), r), o, i, n);
                  if (
                    u &&
                    "[object Object]" !== String(u) &&
                    "[object Object]" !== String(o)
                  )
                    return !0;
                }
                return !!~n.indexOf(o);
              }
              for (var i = t.length; i--; )
                if (~n.indexOf(e(f(t, i)))) return !0;
              return !1;
            };
          },
          $nin: function(n, t, r) {
            const e = s.$in(n, t, r);
            return function(n, t, r, o) {
              return !e(n, t, r, o);
            };
          },
          $mod: function(n) {
            return function(t) {
              return t % n[0] == n[1];
            };
          },
          $ne: function(n, t, r) {
            const e = s.$eq(n, t, r);
            return a(function(n, t, r, o) {
              return !e(n, t, r, o);
            });
          },
          $and: function(n, t, r) {
            return n.map(v(r));
          },
          $all: function(n, t, r) {
            return s.$and(n, t, r);
          },
          $or: function(n, t, r) {
            return n.map(v(r));
          },
          $nor: function(n, t, r) {
            return n.map(v(r));
          },
          $not: function(n, t, r) {
            const e = v(r)(n);
            return function(n, t, r) {
              return !l(e, n, t, r);
            };
          },
          $type: function(n) {
            return function(t, r, e) {
              return null != t && (t instanceof n || t.constructor == n);
            };
          },
          $regex: function(n, t) {
            return new RegExp(n, t.$options);
          },
          $where: function(n) {
            return "string" == typeof n
              ? new Function("obj", "return " + n)
              : n;
          },
          $elemMatch: function(n, t, r) {
            return v(r)(n);
          },
          $exists: function(n) {
            return !!n;
          }
        };
      function g(n, t) {
        return { options: n, validate: t };
      }
      function $({ keyPath: n, child: t, query: r }, e) {
        var u = [];
        if (
          ((function n(t, r, e, u, i) {
            if (e === r.length || null == t)
              return void i.push([t, r[e - 1], u]);
            var c = f(r, e);
            if (o(t) && isNaN(Number(c)))
              for (var a = 0, l = t.length; a < l; a++) n(f(t, a), r, e, t, i);
            else n(f(t, c), r, e + 1, t, i);
          })(e, n, 0, e, u),
          1 === u.length)
        ) {
          var i = u[0];
          return l(t, i[0], i[1], i[2]);
        }
        for (var c = r && void 0 !== r.$ne, a = c, p = 0; p < u.length; p++) {
          var s = u[p],
            g = l(t, s[0], s[1], s[2]);
          c ? (a &= g) : (a |= g);
        }
        return a;
      }
      function d(n, t, r) {
        return g({ keyPath: n, child: t, query: r }, $);
      }
      function v(n) {
        const { comparable: t, expressions: r } = n;
        var e = function(n) {
            var t;
            return (
              (n &&
                ((t = n) &&
                  (t.constructor === Object ||
                    t.constructor === Array ||
                    "function Object() { [native code] }" ===
                      t.constructor.toString() ||
                    "function Array() { [native code] }" ===
                      t.constructor.toString()))) ||
                (n = { $eq: n }),
              n
            );
          },
          o = function(e) {
            e = t(e);
            var o = [];
            for (var u in e) {
              var f = e[u];
              if ("$options" !== u) {
                var c = p[u] || (n && r && r[u]);
                if (c) s[u] && (f = s[u](f, e, n)), o.push(g(t(f), c));
                else {
                  if (36 === u.charCodeAt(0))
                    throw new Error("Unknown operation " + u);
                  var a = u.split(".");
                  o.push(d(a, i(f), f));
                }
              }
            }
            return 1 === o.length ? o[0] : g(o, p.$and);
          },
          i = function(n) {
            return (
              (n = e(n)),
              -1 ===
              (function n(t, r) {
                if (!u(t)) return r;
                for (var e in t) r.push(e), n(t[e], r);
                return r;
              })(n, [])
                .join(",")
                .search(/[$.]/)
                ? g(n, b)
                : o(n)
            );
          };
        return function(n) {
          return o(e(n));
        };
      }
      function b(n, t) {
        if (
          Object.prototype.toString.call(n) !==
          Object.prototype.toString.call(t)
        )
          return !1;
        if (u(n)) {
          if (Object.keys(n).length !== Object.keys(t).length) return !1;
          for (var r in n) if (!b(n[r], t[r])) return !1;
          return !0;
        }
        if (o(n)) {
          if (n.length !== t.length) return !1;
          for (var e = 0, i = n.length; e < i; e++)
            if (!b(n[e], t[e])) return !1;
          return !0;
        }
        return n === t;
      }
      function h(n, t) {
        var r = v(t)(n);
        return (
          t &&
            t.select &&
            (r = {
              options: r,
              validate: function(n, r, e, o) {
                return l(n, r && t.select(r), e, o);
              }
            }),
          r
        );
      }
      function y(n, t) {
        var r = h(n, (t = Object.assign({ compare: m, comparable: j }, t)));
        return function(n, t, e) {
          return l(r, n, t, e);
        };
      }
      function m(n, t) {
        if (b(n, t)) return 0;
        if (typeof n == typeof t) {
          if (n > t) return 1;
          if (n < t) return -1;
        }
      }
      function j(n) {
        return n instanceof Date
          ? n.getTime()
          : o(n)
          ? n.map(j)
          : n && "function" == typeof n.toJSON
          ? n.toJSON()
          : n;
      }
    }
  ]);
});
